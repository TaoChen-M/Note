# deque容器

double-ended queue，双端队列容器

deque容器和vector容器有很多相似之处：

- deque容器也擅长在序列尾部添加或者删除元素（时间复杂度为O(1)），而不擅长在序列中间添加或者删除元素
- deque容器也可以根据需要修改自身的容量和大小

但是deuque容器也擅长在头部添加或删除元素，**deque中存储的元素不能保证所有元素都存储到连续的内存空间中（链式存储）**，当需要向序列两端频繁添加或者删除元素时，首选deque容器。

## 创建deque容器的几种方式

1. 创建一个没有任何元素的空deque容器

   ```c++
   deque<int> d;
   ```

2. 创建一个具有n个元素的deque容器，其中每个元素都采用默认值

   ```CC
   deque<int> d(10);
   //创建一个具有10个元素（默认都是0）的容器
   ```

3. 创建一个具有n个元素，并为每个元素都指定初始值。

   ```C++
   deque<int> d(10,5);
   //创建一个包含10个元素，默认值都是5的容器
   ```

4. 在已有容器的情况下，可以通过拷贝容器创建一个新的容器。

   ```C++
   deque<int> d1(5);
   deque<int> d2(d1);
   //采用这种方式必须保证新旧容器存储的元素类型一致
   ```

5. 拷贝其他类型容器中指定区域内的元素（也可以是普通数组）

   ```C++
   int a[]={1,2,3,4,5};
   deque<int> d(a,a+5);
   array<int,5> arr{11,12,13,14,15};
   deque<int> d(arr.begin()+2,arr.end());
   //拷贝arr容器中的13、14、15
   ```

   

## 访问deque中的元素

同array、vector容器一样，可以采用普通数组访问元素的方式，访问deque容器，同时对元素进行修改，但是会发生数组下标越界的错误。

```c++
deque<int> d{1,2,3,4,5};
for (int i = 0; i < d.size();++i){
     d[i] = i;
     cout << d[i] << '\t';
}
```

deque模板提供了*at( )*成员函数，该函数返回容器中指定位置元素的引用，既可以访问元素，也可以根据需要对其进行修改。

```C++
deque<int> d{1,2,3,4,5};
cout<<d.at(0)<<endl;
d.at(0)=10;
```

deque容器还提供了front( )和back( )函数，分别返回容器的第一个和最后一个元素的引用。

```C++
deque<int> d{1,2,3,4,5};
cout<<d.front()<<endl;
cout<<d.back()<<endl;
d.front()=10;
d.back()=20;
```

同vector容器不同，deque容器没有提供data( )成员函数，同时因为deque容器存储空间不是连续的，因此使用指针去访问deque容器是非常危险的。

另外结合迭代器相关成员函数，可以实现遍历deque容器中指定元素的方法。

```C++
deque<int> d{1,2,3,4,5};
//从元素2开始遍历，遍历到5不包括5
auto first=d.begin();
auto end=d.end()-1;
while(first<end){
    cout<<*first<<endl;
    ++first;
}
```

## deque容器添加和删除元素

| 成员函数         | 功能                               |
| ---------------- | ---------------------------------- |
| emplace_back( )  | 在容器尾部添加一个元素             |
| emplace_front( ) | 在容器现有元素的头部添加一个元素   |
| emplace( )       | 在容器的指定位置直接生成一个元素   |
| erase( )         | 移除一个元素或某一区域内的多个元素 |
| clear( )         | 删除容器内的所有元素               |